txt <- get_email_body(email_content)
txt <- gsub("<.*?>", " ", txt)
ind_txt <- list(paste(txt, collapse="\n"))
email_content <- c(email_content, ind_txt)
}
return(email_content)
}
spam_test <- get_content(spam_2)
get_email_body <- function(email_content){
msge <- str_split(email_content,"\n\n") %>% unlist()
body <- paste(msge[2:length(msge)], collapse=' ' )
return(body)
}
dir <- "/Users/salmaelshahawy/Desktop/MSDS_2019/Fall2019/aquisition_management_607/week_10/spam_ham_documents/spam_2"
email_content <- NA
filename = list.files(dir)
msgContent<-NA
for(i in 1:length(filename))
{
filepath<-paste0(dir,filename[i])
emailContent <-suppressWarnings(warning(readtext(filepath)))
msg <- get_email_body(emailContent)
msg <- gsub("<.*?>", " ", msg)
eachMsg<- list(paste(msg, collapse="\n"))
msgContent = c(msgContent,eachMsg)
}
dir <- "/Users/salmaelshahawy/Desktop/MSDS_2019/Fall2019/aquisition_management_607/week_10/spam_ham_documents/spam_2"
list.files(dir)
get_email_body <- function(emailContent){
msge <- str_split(email_content,"\n\n") %>% unlist()
body <- paste(msge[2:length(msge)], collapse=' ' )
return(body)
}
dir <- "/Users/salmaelshahawy/Desktop/MSDS_2019/Fall2019/aquisition_management_607/week_10/spam_ham_documents/spam_2"
email_content <- NA
filename = list.files(dir)
msgContent<-NA
for(i in 1:length(filename))
{
filepath<-paste0(dir,filename[i])
emailContent <-suppressWarnings(warning(readtext(filepath)))
msg <- get_email_body(emailContent)
msg <- gsub("<.*?>", " ", msg)
eachMsg<- list(paste(msg, collapse="\n"))
msgContent = c(msgContent,eachMsg)
}
get_email_body <- function(email_content){
msge <- str_split(email_content,"\n\n") %>% unlist()
body <- paste(msge[2:length(msge)], collapse=' ' )
return(body)
}
base_dir <- "/Users/salmaelshahawy/Desktop/MSDS_2019/Fall2019/aquisition_management_607/week_10/spam_ham_documents/"
spam_2 <- "spam_2/"
ham_2 <- "easy_ham_2/"
#spam_2_dir <- paste0(base_dir,spam_2)
#ham_2_dir <- paste0(base_dir,ham_2)
email_content <- NA
get_content <- function(type) {
files_path <- paste0(base_dir,type)
files_name <- list.files(files_path)
for (file in 1:length(files_name)) {
email_content <- readtext(files_name[file])
txt <- get_email_body(email_content)
txt <- gsub("<.*?>", " ", txt)
ind_txt <- list(paste(txt, collapse="\n"))
email_content <- c(email_content, ind_txt)
}
return(email_content)
}
spam_test <- get_content('spam_2/')
get_email_body <- function(email_content){
msge <- str_split(email_content,"\n\n") %>% unlist()
body <- paste(msge[2:length(msge)], collapse=' ' )
return(body)
}
base_dir <- "/Users/salmaelshahawy/Desktop/MSDS_2019/Fall2019/aquisition_management_607/week_10/spam_ham_documents"
spam_2 <- "spam_2"
ham_2 <- "easy_ham_2/"
#spam_2_dir <- paste0(base_dir,spam_2)
#ham_2_dir <- paste0(base_dir,ham_2)
email_content <- NA
get_content <- function(type) {
files_path <- paste(base_dir,type, sep = "/")
files_name <- list.files(files_path)
for (file in 1:length(files_name)) {
file_path <- paste(files_path, files_name[i], sep = "/")
email_content <- readtext(file_path)
txt <- get_email_body(email_content)
txt <- gsub("<.*?>", " ", txt)
ind_txt <- list(paste(txt, collapse="\n"))
email_content <- c(email_content, ind_txt)
}
return(email_content)
}
spam_test <- get_content()
get_email_body <- function(email_content){
msge <- str_split(email_content,"\n\n") %>% unlist()
body <- paste(msge[2:length(msge)], collapse=' ' )
return(body)
}
base_dir <- "/Users/salmaelshahawy/Desktop/MSDS_2019/Fall2019/aquisition_management_607/week_10/spam_ham_documents"
spam_2 <- "spam_2"
ham_2 <- "easy_ham_2/"
#spam_2_dir <- paste0(base_dir,spam_2)
#ham_2_dir <- paste0(base_dir,ham_2)
email_content <- NA
get_content <- function(type) {
files_path <- paste(base_dir,type, sep = "/")
files_name <- list.files(files_path)
for (file in 1:length(files_name)) {
file_path <- paste(files_path, files_name[i], sep = "/")
email_content <- readtext(file_path)
txt <- get_email_body(email_content)
txt <- gsub("<.*?>", " ", txt)
ind_txt <- list(paste(txt, collapse="\n"))
email_content <- c(email_content, ind_txt)
}
return(email_content)
}
spam_test <- get_content(spam_2)
get_email_body <- function(email_content){
msge <- str_split(email_content,"\n\n") %>% unlist()
body <- paste(msge[2:length(msge)], collapse=' ' )
return(body)
}
base_dir <- "/Users/salmaelshahawy/Desktop/MSDS_2019/Fall2019/aquisition_management_607/week_10/spam_ham_documents"
spam_2 <- "spam_2"
ham_2 <- "easy_ham_2/"
#spam_2_dir <- paste0(base_dir,spam_2)
#ham_2_dir <- paste0(base_dir,ham_2)
email_content <- NA
get_content <- function(type) {
files_path <- paste(base_dir,type, sep = "/")
files_name <- list.files(files_path)
for (file in 1:length(files_name)) {
file_path <- paste(files_path, files_name[i], sep = "/")
email_content <- readLines(file_path)
txt <- get_email_body(email_content)
txt <- gsub("<.*?>", " ", txt)
ind_txt <- list(paste(txt, collapse="\n"))
email_content <- c(email_content, ind_txt)
}
return(email_content)
}
spam_test <- get_content(spam_2)
length(spam_test)
spam_test <- get_content(spam_2)
spam<-data.frame()
spam<-as.data.frame(unlist(spam_test),stringsAsFactors = FALSE)
spam_test <- get_content(spam_2)
spam<-data.frame()
spam<-as.data.frame(unlist(spam_test),stringsAsFactors = FALSE)
head(spam)
dim(spam)
spam$class<-1
colnames(spam)<-c("msg","class")
head(spam)
spam_test <- get_content(spam_2)
make_df <- function(content) {
df <- data.frame(matrix(unlist(content),
nrow=length(content),
byrow=T),
stringsAsFactors=FALSE)
return(df)
}
spam_df <- make_df(spam_test)
spam_df
make_df <- function(content) {
df <- data.frame(matrix(unlist(content),
nrow=length(content),
byrow=T),
stringsAsFactors=FALSE) %>%
add_tag()
return(df)
}
spam_df <- make_df(spam_test)
df <- data.frame(matrix(unlist(content),
nrow=length(content),
byrow=T),
stringsAsFactors=FALSE)
make_df <- function(content) {
df <- data.frame(matrix(unlist(content),
nrow=length(content),
byrow=T),
stringsAsFactors=FALSE)
return(df)
}
spam_df <- make_df(spam_test)
head(spam_df)
dim(spam_df)
make_df <- function(content) {
df <- data.frame(matrix(unlist(content),
nrow=length(content),
byrow=T),
stringsAsFactors=FALSE)
return(df)
}
spam_df <- make_df(spam_test)
View(spam_df)
spam_test <- get_content(spam_2)
ham_test <- get_content(easy_ham_2)
get_email_body <- function(email_content){
msge <- str_split(email_content,"\n\n") %>% unlist()
body <- paste(msge[2:length(msge)], collapse=' ' )
return(body)
}
base_dir <- "/Users/salmaelshahawy/Desktop/MSDS_2019/Fall2019/aquisition_management_607/week_10/spam_ham_documents"
spam_2 <- "spam_2"
ham_2 <- "easy_ham_2"
#spam_2_dir <- paste0(base_dir,spam_2)
#ham_2_dir <- paste0(base_dir,ham_2)
email_content <- NA
get_content <- function(type) {
files_path <- paste(base_dir,type, sep = "/")
files_name <- list.files(files_path)
for (file in 1:length(files_name)) {
file_path <- paste(files_path, files_name[i], sep = "/")
email_content <- readLines(file_path)
txt <- get_email_body(email_content)
txt <- gsub("<.*?>", " ", txt)
ind_txt <- list(paste(txt, collapse="\n"))
email_content <- c(email_content, ind_txt)
}
return(email_content)
}
spam_test <- get_content(spam_2)
ham_test <- get_content(easy_ham_2)
dir
base_dir
paste(base_dir, easy_ham_2, sep = "/")
paste(base_dir, "easy_ham_2", sep = "/")
paste(base_dir, "spam_2", sep = "/")
spam_test <- get_content("spam_2")
ham_test <- get_content("easy_ham_2")
make_df <- function(content) {
df <- data.frame(matrix(unlist(content),
nrow=length(content),
byrow=T),
stringsAsFactors=FALSE)
return(df)
}
spam_df <- make_df(spam_test)
ham_df <- make_df(ham_test)
View(spam_df)
View(ham_df)
to_corpus <- function(df) {
corpus_name <- df %>%
VectorSource() %>%
VCorpus()
cleaned_corpus <- corpus_name %>%
tm_map(removeNumbers) %>%
tm_map(removePunctuation) %>%
tm_map(tolower) %>%
tm_map(PlainTextDocument) %>%
tm_map(removeWords, stopwords("en")) %>%
tm_map(stripWhitespace)
return(cleaned_corpus)
}
spam_corpus <- to_corpus(spam_df)
summary(spam_corpus)
spam_corpus <- to_corpus(spam_test)
summary(spam_corpus)
files_path <- paste(base_dir,"spam_2", sep = "/")
files_path
files_name <- list.files(files_path)
files_name
length(files_name)
file_path <- paste(files_path, files.name[1], sep = "/")
file_path
email_content <- readLines(file_path)
email_content
get_email_body <- function(email_content){
msge <- str_split(email_content,"\n\n") %>% unlist()
body <- paste(msge[2:length(msge)], collapse=' ' )
return(body)
}
base_dir <- "/Users/salmaelshahawy/Desktop/MSDS_2019/Fall2019/aquisition_management_607/week_10/spam_ham_documents"
spam_2 <- "spam_2"
ham_2 <- "easy_ham_2"
email_content <- NA
get_content <- function(type) {
files_path <- paste(base_dir,type, sep = "/")
files_name <- list.files(files_path)
for (file in 1:length(files_name)) {
file_path <- paste(files_path, files_name[file], sep = "/")
email_content <- readLines(file_path)
txt <- get_email_body(email_content)
txt <- gsub("<.*?>", " ", txt)
ind_txt <- list(paste(txt, collapse="\n"))
email_content <- c(email_content, ind_txt)
}
return(email_content)
}
spam_test <- get_content("spam_2")
ham_test <- get_content("easy_ham_2")
make_df <- function(content) {
df <- data.frame(matrix(unlist(content),
nrow=length(content),
byrow=T),
stringsAsFactors=FALSE)
return(df)
}
spam_df <- make_df(spam_test)
ham_df <- make_df(ham_test)
to_corpus <- function(df) {
corpus_name <- df %>%
VectorSource() %>%
VCorpus()
cleaned_corpus <- corpus_name %>%
tm_map(removeNumbers) %>%
tm_map(removePunctuation) %>%
tm_map(tolower) %>%
tm_map(PlainTextDocument) %>%
tm_map(removeWords, stopwords("en")) %>%
tm_map(stripWhitespace)
return(cleaned_corpus)
}
spam_corpus <- to_corpus(spam_df)
summary(spam_corpus)
make_df <- function(content) {
df <- data.frame(matrix(unlist(content),
nrow=length(content),
byrow=T),
stringsAsFactors=FALSE)
return(df)
}
spam_df <- make_df(spam_test)
ham_df <- make_df(ham_test)
spam_df
make_df <- function(content) {
df <- data.frame(matrix(unlist(content),
nrow=length(content),
byrow=T),
stringsAsFactors=FALSE)
return(df)
}
spam_df <- make_df(spam_test)
ham_df <- make_df(ham_test)
View(spam_df)
make_df <- function(content) {
df <- data.frame(matrix(unlist(content),
nrow=length(content),
byrow=T),
stringsAsFactors=FALSE)
return(df)
}
spam_df <- make_df(spam_test)
ham_df <- make_df(ham_test)
View(spam_df)
make_df <- function(content) {
df <- data.frame(matrix(unlist(content),
nrow=length(content),
byrow=T),
stringsAsFactors=FALSE)
return(df)
}
spam_df <- make_df(spam_test)
ham_df <- make_df(ham_test)
View(spam_df)
View(ham_df)
# adding tag to each document either spam or ham
get_class <- function(corpus, value){
for (doc in 1:length(corpus)){
if(value == "spam"){
meta(corpus[[doc]]) <- "spam"                # Add the value to the specified tag
} else {
meta(corpus[[doc]]) <- "ham"
}
return(corpus)
}
to_corpus <- function(df) {
corpus_name <- df %>%
VectorSource() %>%
VCorpus()
cleaned_corpus <- corpus_name %>%
tm_map(removeNumbers) %>%
tm_map(removePunctuation) %>%
tm_map(tolower) %>%
tm_map(PlainTextDocument) %>%
tm_map(removeWords, stopwords("en")) %>%
tm_map(stripWhitespace)
return(cleaned_corpus)
}
spam_corpus <- to_corpus(spam_df)
summary(spam_corpus)
ham_df[[1]]
spam_df[1]
get_content("spam_2")
file_path
email_content <- readLines(file_path)
email_content
txt <- get_email_body(email_content)
txt
txt <- gsub("<.*?>", " ", txt)
txt
ind_txt <- list(paste(txt, collapse = "\n"))
ind_txt
email_content <- c(email_content, ind_txt)
email_content
VectorSource(email_content)
nnew <- VectorSource(email_content)
nnnew <- VCorpus(nnew)
nnnew
summary(nnnew)
base_url_spam <- "https://spamassassin.apache.org/old/publiccorpus/20030228_spam_2.tar.bz2"
spam_zip <- "20030228_spam_2.tar.bz2"
spam_tar <- "20030228_spam_2.tar"
base_url_ham <- "https://spamassassin.apache.org/old/publiccorpus/20030228_easy_ham_2.tar.bz2"
ham_zip <- "20030228_easy_ham_2.tar.bz2"
ham_tar <- "20030228_easy_ham_2.tar"
if(!file.exists(spam_tar)){
res_spam <- tryCatch(download.file(base_url_spam,
destfile= spam_folder,
method="auto"),
error=function(e) 1)
bunzip2(spam_zip)
untar(spam_tar, exdir="spam_ham_documents")
}
if(!file.exists(ham_tar)){
res_ham <- tryCatch(download.file(base_url_ham,
destfile= ham_folder,
method="auto"),
error=function(e) 1)
bunzip2(ham_zip)
untar(ham_tar, exdir = "spam_ham_documents")
} else {
paste("The file is already exists!")
}
get_email_body <- function(email_content){
msge <- str_split(email_content,"\n\n") %>% unlist()
body <- paste(msge[2:length(msge)], collapse=' ' )
return(body)
}
base_dir <- "/Users/salmaelshahawy/Desktop/MSDS_2019/Fall2019/aquisition_management_607/week_10/spam_ham_documents"
email_content <- NA
get_content <- function(type) {
files_path <- paste(base_dir,type, sep = "/")
files_name <- list.files(files_path)
for (file in 1:length(files_name)) {
file_path <- paste(files_path, files_name[file], sep = "/")
email_content <- readLines(file_path)
txt <- get_email_body(email_content)
txt <- gsub("<.*?>", " ", txt)
ind_txt <- list(paste(txt, collapse="\n"))
email_content <- c(email_content, ind_txt)
}
return(email_content)
}
spam_test <- get_content("spam_2")
ham_test <- get_content("easy_ham_2")
spam_test <- get_content("spam_2")
ham_test <- get_content("easy_ham_2")
to_corpus <- function(doc) {
corpus_name <- doc %>%
VectorSource() %>%
VCorpus()
cleaned_corpus <- corpus_name %>%
tm_map(removeNumbers) %>%
tm_map(removePunctuation) %>%
tm_map(tolower) %>%
tm_map(PlainTextDocument) %>%
tm_map(removeWords, stopwords("en")) %>%
tm_map(stripWhitespace)
return(cleaned_corpus)
}
spam_corpus <- to_corpus(spam_test)
summary(spam_corpus)
spam_test
inspect(spam_test)
writeLines(as.character(spam_test[1]))
get_email_body <- function(email_content){
msge <- str_split(email_content,"\n\n") %>% unlist()
body <- paste(msge[2:length(msge)], collapse=' ' )
return(body)
}
base_dir <- "/Users/salmaelshahawy/Desktop/MSDS_2019/Fall2019/aquisition_management_607/week_10/spam_ham_documents"
email_content <- NA
get_content <- function(type) {
files_path <- paste(base_dir,type, sep = "/")
files_name <- list.files(files_path)
for (file in 1:length(files_name)) {
file_path <- paste(files_path, files_name[file], sep = "/")
email_content <- lapply(file_path, readLines(file_path))
txt <- get_email_body(email_content)
txt <- gsub("<.*?>", " ", txt)
ind_txt <- list(paste(txt, collapse="\n"))
email_content <- c(email_content, ind_txt)
}
return(email_content)
}
spam_test <- get_content("spam_2")
get_email_body <- function(email_content){
msge <- str_split(email_content,"\n\n") %>% unlist()
body <- paste(msge[2:length(msge)], collapse=' ' )
return(body)
}
base_dir <- "/Users/salmaelshahawy/Desktop/MSDS_2019/Fall2019/aquisition_management_607/week_10/spam_ham_documents"
email_content <- NA
get_content <- function(type) {
files_path <- paste(base_dir,type, sep = "/")
files_name <- list.files(files_path)
for (file in 1:length(files_name)) {
file_path <- paste(files_path, files_name[file], sep = "/")
email_content <- lapply(file_path, readLines())
txt <- get_email_body(email_content)
txt <- gsub("<.*?>", " ", txt)
ind_txt <- list(paste(txt, collapse="\n"))
email_content <- c(email_content, ind_txt)
}
return(email_content)
}
spam_test <- get_content("spam_2")
